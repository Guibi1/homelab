apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: cnpg-wal-minio
    namespace: cnpg
spec:
    releaseName: cnpg-wal-minio
    chart:
        spec:
            chart: tenant
            sourceRef:
                kind: HelmRepository
                name: minio-repo
                namespace: minio
    interval: 50m
    install:
        remediation:
            retries: 3

    values:
        tenant:
            name: cnpg-wal-minio
            buckets:
              - name: nextcloud
              - name: vaultwarden

            configSecret:
                name: cnpg-wal-minio-credentials

            prometheusOperator: true

            pools:
              - name: pool-0
                servers: 1
                storageClassName: openebs-zfspv
                size: 50Gi
